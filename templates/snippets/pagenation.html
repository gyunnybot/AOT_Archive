{% with total=page_obj.paginator.num_pages current=page_obj.number %}
  {% if total > 1 %}
    <div style="text-align: center; margin: 1rem 0;">
      {% for num in page_obj.paginator.page_range %}
        {% if num >= current|add:'-2' and num <= current|add:'2' %}
          {% if current == num %}
            <a href="?page={{ num }}" class="btn btn-secondary rounded-pill active">
              {{ num }}
            </a>
          {% else %}
            <a href="?page={{ num }}" class="btn btn-outline-secondary rounded-pill">
              {{ num }}
            </a>
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}