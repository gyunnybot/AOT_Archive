{% extends 'base.html' %}

{% block content %}
<div style="text-align: center; margin-bottom: 1.5rem;">
    <a href="{% url 'projectapp:detail' pk=target_article.project.pk %}"
       class="btn btn-outline-dark rounded-pill px-4 py-2">
        🔗 {{ target_article.project.name }}
    </a>
</div>

<div>
    <div style="text-align: center; max-width: 700px; margin: 4rem auto">

        <h2 style="margin-bottom: 2rem;">
            {{ target_article.title }}
        </h2>

        <!-- 작성자 정보 (프로필 이미지 + 닉네임) -->
        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 1rem;">
            <a href="{% url 'accountapp:detail' pk=target_article.writer.pk %}"
               style="display: flex; align-items: center; text-decoration: none; color: inherit;">
                <img src="{{ target_article.writer.profile.image.url }}"
                     alt="Profile Image"
                     style="width: 35px; height: 35px; border-radius: 50%; object-fit: cover; margin-right: 0.5rem;">
                <strong>{{ target_article.writer.profile.nickname }}</strong>
            </a>
        </div>


        <hr>

        <img src="{{ target_article.image.url }}" alt=""
             style="display: block; margin: 2rem auto; max-width: 100%; height: auto;">

        <p>
            {{ target_article.content }}
        </p>

        {% if user == target_article.writer %}
        <a href="{% url 'articleapp:update' pk=target_article.pk %}"
           class="btn btn-primary rounded-pill col-3 mb-3"
           style="margin-right: 1rem;">
            Update
        </a>

        <a href="{% url 'articleapp:delete' pk=target_article.pk %}"
           class="btn btn-dark rounded-pill col-3 mb-3">
            Delete
        </a>
        {% endif %}

        <hr style="margin-bottom: 3rem">

        {% for cmt in target_article.comment.all %}
        {% include 'commentapp/detail.html' with comment=cmt %}
        {% endfor %}

        {% include 'commentapp/create.html' with article=target_article %}

    </div>
</div>

{% endblock %}